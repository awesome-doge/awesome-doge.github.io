<!DOCTYPE html>
<html>
  <head>
    <title>構建電子書＆網站 by gitbook – awesome-doge – Freedom is priceless.</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="gitbook 是一個命令工具，幫助你把一堆md,asciidocbuild 成網頁版的電子書以及mobi, epub, pdf的檔案生成。

" />
    <meta property="og:description" content="gitbook 是一個命令工具，幫助你把一堆md,asciidocbuild 成網頁版的電子書以及mobi, epub, pdf的檔案生成。

" />
    
    <meta name="author" content="awesome-doge" />

    
    <meta property="og:title" content="構建電子書＆網站 by gitbook" />
    <meta property="twitter:title" content="構建電子書＆網站 by gitbook" />
    
    
    
    <meta property="og:image" content="https://awesome-doge.github.ioimages/gitbook.png">
    
    
    
    <meta content="透過gitbook生成電子書，且發佈到github page" property="og:description">
    

    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>構建電子書＆網站 by gitbook | awesome doge</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="構建電子書＆網站 by gitbook" />
<meta name="author" content="awesome-doge" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="透過gitbook生成電子書，且發佈到github page" />
<meta property="og:description" content="透過gitbook生成電子書，且發佈到github page" />
<link rel="canonical" href="https://awesome-doge.github.io/gitbook+githubpage+ebook/" />
<meta property="og:url" content="https://awesome-doge.github.io/gitbook+githubpage+ebook/" />
<meta property="og:site_name" content="awesome doge" />
<meta property="og:image" content="https://awesome-doge.github.io/images/gitbook.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-26T09:26:44+00:00" />
<meta name="twitter:card" content="Cypherpunks" />
<meta property="twitter:image" content="https://awesome-doge.github.io/images/gitbook.png" />
<meta property="twitter:title" content="構建電子書＆網站 by gitbook" />
<meta name="twitter:site" content="@awesome-doge" />
<meta name="twitter:creator" content="@awesome-doge" />
<script type="application/ld+json">
{"description":"透過gitbook生成電子書，且發佈到github page","headline":"構建電子書＆網站 by gitbook","dateModified":"2019-08-26T09:26:44+00:00","datePublished":"2019-08-26T09:26:44+00:00","url":"https://awesome-doge.github.io/gitbook+githubpage+ebook/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://awesome-doge.github.io/gitbook+githubpage+ebook/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://awesome-doge.github.io/images/doge.png"},"name":"awesome-doge"},"author":{"@type":"Person","name":"awesome-doge"},"image":"https://awesome-doge.github.io/images/gitbook.png","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="awesome-doge - Freedom is priceless." href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->

  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="/images/doge.png" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">awesome-doge</a></h1>
            <p class="site-description">Freedom is priceless.</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/post">Post</a>
            <!-- <a href="/categories">主題</a> -->
            <a href="/tor">Tor</a>
            <a href="/archive">Archives</a>
            <a href="/about">About</a>            
            <!-- <a href="/tags">tags</a> -->
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>構建電子書＆網站 by gitbook</h1>

  <div class="entry">
    <p>gitbook 是一個命令工具，幫助你把一堆<code class="language-plaintext highlighter-rouge">md</code>,<code class="language-plaintext highlighter-rouge">asciidoc</code>build 成網頁版的電子書以及mobi, epub, pdf的檔案生成。</p>
<div align="center"><img src="/images/gitbook.png" /></div>

<p>閱讀該文章時<a href="https://gist.github.com/christech1117/6dc5221c177104990767d6490ad8c7ba">markdown</a> 語法是基本常識。</p>

<p>因為最近不斷地整理電子書，發現了電子書的遍及格式大致有<code class="language-plaintext highlighter-rouge">markdown</code>格式，簡稱<code class="language-plaintext highlighter-rouge">md</code>，還有另外一種叫<code class="language-plaintext highlighter-rouge">asciidoc</code>，我初次見到到<code class="language-plaintext highlighter-rouge">asciidoc</code>是在<a href="https://github.com/bitcoinbook/bitcoinbook">bitcoinbook</a>之後又遇見了<a href="https://github.com/ethereumbook/ethereumbook">ethereumbook</a>，可是裡面的公式還是呈現不出來，後來遇見了gitbook，讓我很舒服的把<code class="language-plaintext highlighter-rouge">md</code>,<code class="language-plaintext highlighter-rouge">asciidoc</code> build 成網頁版的電子書以及mobi, epub, pdf 三種格式，讓大家可以在手機上就可閱讀。</p>

<p>gitbook 的使用過程:</p>
<ul>
  <li>安裝：安裝所需的指令環境。</li>
  <li>build ： 生成網頁的電子書文件。</li>
  <li>gitbook 伺服：器運行一個gitbook 伺服器，讓你可以在 http://localhost:4000 的位置，喵一下樣子。</li>
  <li>編譯成書籍 mobi, epub, pdf 。</li>
</ul>

<h1 id="大綱">大綱</h1>
<ul>
  <li><a href="#%e5%a4%a7%e7%b6%b1">大綱</a></li>
  <li><a href="#%e5%ae%89%e8%a3%9d-gitbook-%e6%8c%87%e4%bb%a4">安裝 gitbook 指令</a></li>
  <li><a href="#%e8%a3%bd%e4%bd%9c%e4%b8%80%e6%9c%ac%e6%9b%b8">製作一本書</a>
    <ul>
      <li><a href="#%e6%9b%b8%e6%9c%ac%e7%b5%90%e6%a7%8b">書本結構</a></li>
      <li><a href="#build">build</a></li>
    </ul>
  </li>
  <li><a href="#%e9%81%8b%e8%a1%8c-%e4%bc%ba%e6%9c%8d%e5%99%a8%e6%a8%a1%e5%bc%8f">運行 伺服器模式</a></li>
  <li><a href="#%e8%a3%bd%e4%bd%9c%e6%88%90%e9%9b%bb%e5%ad%90%e6%9b%b8">製作成電子書</a></li>
  <li><a href="#%e5%95%8f%e9%a1%8c">問題</a></li>
  <li><a href="#%e7%99%bc%e4%bd%88%e5%88%b0github-page">發佈到github page</a>
    <ul>
      <li><a href="#%e9%96%8b%e5%a7%8b%e7%99%bc%e5%b8%83">開始發布</a></li>
      <li><a href="#%e8%87%aa%e5%8b%95%e7%99%bc%e5%b8%83%e8%85%b3%e6%9c%ac">自動發布腳本</a></li>
      <li><a href="#%e5%b8%b8%e8%a6%8b%e5%95%8f%e9%a1%8c">常見問題</a></li>
    </ul>
  </li>
  <li><a href="#%e5%8f%83%e8%80%83%e6%96%87%e7%8d%bb">參考文獻</a></li>
</ul>

<h1 id="安裝-gitbook-指令">安裝 gitbook 指令</h1>
<p>如果沒有安裝過gitbook的可以執行一下
ps. gitbook 依賴npm，npm的安裝請參考<a href="https://nodejs.org/en/download/">node js 下載頁面</a>自己安裝加油嘿。</p>
<div align="center"><img src="/images/node.js.png" /></div>

<p>務必要安裝完才可以執行以下指令安裝<code class="language-plaintext highlighter-rouge">gitbook</code>，不然無效。
安裝也是需要一些時間。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo npm install -g gitbook-cli
sudo npm install -g gitbook
</code></pre></div></div>
<h1 id="製作一本書">製作一本書</h1>
<p>現在我們來創造一個名字你高興的資料夾（建議是英文書名），進去之後，指行以下指令初始化一下該資料夾（這可能會花一點時間）。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitbook init
</code></pre></div></div>

<p>執行的過程，跑完恭喜你：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>➜  ~ mkdir book
➜  ~ cd book
➜  book gitbook init
warn: no summary file in this book
info: create README.md
info: create SUMMARY.md
info: initialization is finished
</code></pre></div></div>
<p>裡面會有兩個檔案，分別為<code class="language-plaintext highlighter-rouge">README.md</code>,  <code class="language-plaintext highlighter-rouge">SUMMARY.md</code>。</p>

<h2 id="書本結構">書本結構</h2>
<p><code class="language-plaintext highlighter-rouge">SUMMARY.md</code>文件定義了整本書的結構。
結構很簡單，就是一個簡單的markdown語法的清單。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Summary

* [Introduction](README.md)
* [第一章](ch1.md)
	* [第一節](ch1-1.md)
	* [第二節](cd1-2.md)
* [第二章](ch2.md)
* [第三章](ch3.md)
</code></pre></div></div>

<h2 id="build">build</h2>
<p>執行該指令可以把<code class="language-plaintext highlighter-rouge">SUMMARY.md</code>引用到的文件，變成網頁。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitbook build
</code></pre></div></div>

<p>build的過程，此時，資料夾內會多一個<code class="language-plaintext highlighter-rouge">_book</code>資料夾，裡面就是創見出來的網頁：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>➜  book gitbook build
info: 7 plugins are installed
info: 6 explicitly listed
info: loading plugin "highlight"... OK
info: loading plugin "search"... OK
info: loading plugin "lunr"... OK
info: loading plugin "sharing"... OK
info: loading plugin "fontsettings"... OK
info: loading plugin "theme-default"... OK
info: found 1 pages
info: found 0 asset files
info: &gt;&gt; generation finished with success in 1.2s !
</code></pre></div></div>

<h1 id="運行-伺服器模式">運行 伺服器模式</h1>
<p>運作成伺服器，可以即時瀏覽書籍撰寫的變化，<code class="language-plaintext highlighter-rouge">gitbook serve</code>會隨時偵測你存擋，刷新網頁。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitbook serve
</code></pre></div></div>
<p>運行成功如下，就可以前往<a href="http://localhost:4000">http://localhost:4000</a>瀏覽：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Starting server ...
Serving book on http://localhost:4000
</code></pre></div></div>

<h1 id="製作成電子書">製作成電子書</h1>

<p>gitbook 可以製作書籍種類</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gitbook pdf
gitbook epub
gitbook mobi
</code></pre></div></div>
<p>如果覺得懶，已可以寫一個<code class="language-plaintext highlighter-rouge">build-book.sh</code>把上述程式碼貼上去，以後只要<code class="language-plaintext highlighter-rouge">sh build-book.sh</code>就可以自動生成勒。</p>

<h1 id="問題">問題</h1>
<p>不過如果你直接使用會遇到以下報錯：</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>InstallRequiredError: "ebook-convert" is not installed.
Install it from Calibre: https://calibre-ebook.com
</code></pre></div></div>
<p>解決方法：</p>
<ul>
  <li>前往 https://calibre-ebook.com/download ，下載mac 的版本</li>
  <li>安裝它，把他丟到<code class="language-plaintext highlighter-rouge">應用程式</code>裡面</li>
  <li>執行以下指令:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ln -s /Applications/calibre.app/Contents/MacOS/ebook-convert /usr/local/bin
</code></pre></div>    </div>
    <p>ok，應該可以很舒服的執行勒</p>
  </li>
</ul>

<h1 id="發佈到github-page">發佈到github page</h1>

<p>先前準備：</p>
<ul>
  <li>在 gitbub上創建一個repo</li>
  <li>把它clone 到 local 端</li>
  <li>進到 該資料夾 初始化變成書 <code class="language-plaintext highlighter-rouge">gitbook init</code>（已經是書的不要理我</li>
</ul>

<h2 id="開始發布">開始發布</h2>
<p>進到github clone 下來的 repo</p>

<ol>
  <li>先做一下手腳（這是為了可以讓自動化發布網頁鋪路）：
    <ul>
      <li>在 主目錄創一個 文件 叫<code class="language-plaintext highlighter-rouge">.gitignore</code></li>
      <li>內容如下
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> *~
 _book
 .DS_Store
</code></pre></div>        </div>
      </li>
      <li>來<code class="language-plaintext highlighter-rouge">gitbook build</code>一下，刷新<code class="language-plaintext highlighter-rouge">_book</code>內容</li>
      <li>來推到主分之一下避免衝突
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git commit -am "update"; git add . ;git push origin master
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>創建一個分支叫做<code class="language-plaintext highlighter-rouge">gh-pages</code>，這個執行一次就好
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git checkout --orphan gh-pages
</code></pre></div>    </div>
  </li>
  <li>進到<code class="language-plaintext highlighter-rouge">gh-pages</code>分支
    <ul>
      <li>移除主目錄下根本不是網頁的檔案，如果沒有做第一步的，你屎定了，文件全部都會消失。
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git rm --cached -r .
 git clean -df
</code></pre></div>        </div>
      </li>
      <li>把<code class="language-plaintext highlighter-rouge">_book</code>裡面的文件複製出來
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cp -r _book/* .
</code></pre></div>        </div>
      </li>
      <li>堆一波到<code class="language-plaintext highlighter-rouge">gh-page</code>分支
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git commit -am "update"; git add . ;git push origin gh-pages
</code></pre></div>        </div>
      </li>
      <li>可以回到主目錄勒，如果不知道怎麼回家的
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git checkout master%
</code></pre></div>        </div>
        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* 檢查一下有沒有發布成功，網址的樣子要是`帳號名稱.github.io/倉庫名稱`，譬如`https://cypherpunks-core.github.io/bitcoinbook_2nd_zh/`，祝您旅途愉快。
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ol>

<h2 id="自動發布腳本">自動發布腳本</h2>
<p>請在主目錄建立一個文件叫<code class="language-plaintext highlighter-rouge">publish.sh</code>，把下面內容貼上並存擋。
執行<code class="language-plaintext highlighter-rouge">sh publish.sh '更新的說明'</code>就可以勒。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout master
gitbook build 
git add .
git commit -m $1
git push -u origin master
git branch -D gh-pages
git branch  -r -d  origin/gh-pages
git push origin :gh-pages
git checkout --orphan gh-pages
git rm --cached -r .
git clean -df
cp -r _book/* .
git add .
git commit -m $1
git push -u origin gh-pages
git checkout master%
</code></pre></div></div>

<h2 id="常見問題">常見問題</h2>
<p>問. 我發佈啦，怎麼無法在<code class="language-plaintext highlighter-rouge">帳號名稱.github.io/倉庫名稱</code>域名下看到我的網站勒？</p>
<ul>
  <li>要等一段時間（看運氣），幾秒鐘到三分鐘不等</li>
  <li>你檢查一下你有推到 <code class="language-plaintext highlighter-rouge">gh-pages</code>分支嗎？</li>
  <li>既使你推到了<code class="language-plaintext highlighter-rouge">gh-pages</code>分支，你有順利的把<code class="language-plaintext highlighter-rouge">_book</code>中的網頁拉出來嗎？最少要<code class="language-plaintext highlighter-rouge">index.html</code></li>
  <li>該 repo 的setting 選項當中，有一個預設branch 的選項，檢查一下是否設定在<code class="language-plaintext highlighter-rouge">gh-pages</code>分支。</li>
</ul>

<h1 id="參考文獻">參考文獻</h1>
<ul>
  <li><a href="https://morrowind.gitbooks.io/gitbook_notes/content/qian_yan.html">gitbook——使用笔记</a></li>
  <li><a href="https://chrisniael.gitbooks.io/gitbook-documentation/content/index.html">GitBook文档（中文版）</a></li>
  <li><a href="https://my.oschina.net/lpe234/blog/854226">Gitbook 安装及使用 </a></li>
  <li><a href="https://www.jianshu.com/p/6a16064a4d1e">Mac上将gitbook转化成pdf文档下载</a></li>
  <li><a href="https://yangjh.oschina.io/gitbook/UsingPages.html">自动化脚本</a></li>
</ul>

  </div>

  <div class="date">
    Written on August 26, 2019
  </div>
  
  
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:cov2019@protonmail.com"><i class="svg-icon email"></i></a>
<a href="https://www.facebook.com/dogewwoww"><i class="svg-icon facebook"></i></a>

<a href="https://github.com/awesome-doge"><i class="svg-icon github"></i></a>








        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-131051587-4', 'auto');
		ga('send', 'pageview', {
		  'page': '/gitbook+githubpage+ebook/',
		  'title': '構建電子書＆網站 by gitbook'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
